@model IEnumerable<ETForum.Models.StudySession>

<h2>Moje study sesije</h2>

@if (TempData["Poruka"] != null)
{
	<div class="alert alert-warning">
		@TempData["Poruka"]
	</div>
}


@if (!(bool)ViewBag.AktivnaSesija)
{
	<form asp-action="StartSession" method="post">
		<button type="submit" class="btn btn-success">Započni novu sesiju</button>
	</form>
}
else
{
	<div class="alert alert-info">
		Već imate aktivnu sesiju. Završite je pre nego što započnete novu.
	</div>
}



<table class="table">
	<thead>
	<tr>
		<th>Početak</th>
		<th>Kraj</th>
		<th>Trajanje</th>
		<th></th>
	</tr>
	</thead>
	<tbody>
	@foreach (var s in Model)
	{
		<tr>
			<td>@s.pocetak?.ToString("g")</td>
			<td>@s.kraj?.ToString("g")</td>
			<td>@(s.trajanje?.ToString(@"hh\:mm\:ss") ?? "-")</td>
			<td>
				@if (s.kraj == null)
				{
					<form asp-action="EndSession" method="post">
						<input type="hidden" name="id" value="@s.id" />
						<button type="submit" class="btn btn-danger btn-sm">Završi</button>
					</form>
				}
				else
				{
					<span>Završeno</span>
				}
			</td>
		</tr>
	}
	</tbody>
</table>